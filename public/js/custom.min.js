function URLToArray(t){for(var a={},e=t.substring(t.indexOf("?")+1).split("&"),n=0;n<e.length;n++)if(e[n]){var o=e[n].split("=");a[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return a}function getObjectLocker(t,a){var e=null;return console.log(t+"--"+a),$.each(t,function(n,o){return console.log(t+"--"+o),o.name==a?(e=o,!1):void 0}),e}function onMasuk(){$(".dropdown-content.masuk").is(":hidden")?$(".dropdown-content.masuk").addClass("active"):$(".dropdown-content.masuk").removeClass("active")}function setCookie(t,a,e){var n=new Date;n.setTime(n.getTime()+24*e*60*60*1e3);var o="expires="+n.toUTCString();document.cookie=t+"="+a+";"+o+";path=/"}function getCookie(t){for(var a=t+"=",e=document.cookie.split(";"),n=0;n<e.length;n++){for(var o=e[n];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(a))return o.substring(a.length,o.length)}return""}function getLocker(t,a,e){var n=new google.maps.LatLngBounds,o={mapTypeId:"roadmap"};map=new google.maps.Map(document.getElementById("map"),o),map.setTilt(45);var i,r,l=new google.maps.InfoWindow,s=location.protocol+"//"+location.hostname+(location.port?":"+location.port:""),c=s+"/img/box/ic_box_map.svg",d={url:c,origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(25,25)};for(r=0;r<t.length;r++){var u=new google.maps.LatLng(t[r][1],t[r][2]);n.extend(u),"current_location"==t[r][0]?(i=new google.maps.Marker({position:u,map:map,title:"Lokasi anda disini"}),l.setContent(a[r][0]),l.open(map,i)):i=new google.maps.Marker({position:u,map:map,icon:d,title:t[r][0]}),google.maps.event.addListener(i,"click",function(t,e){return function(){l.setContent(a[e][0]),l.open(map,t),console.log(a[e][0])}}(i,r)),map.fitBounds(n)}var m=google.maps.event.addListener(map,"bounds_changed",function(t){e?(this.setZoom(11),this.setCenter(new google.maps.LatLng(-6.21,106.81))):this.setZoom(13),google.maps.event.removeListener(m)})}var domain=location.protocol+"//"+location.hostname+(location.port?":"+location.port:"");$(document).ready(function(){$(".datepicker").datepicker({dateFormat:"dd/mm/yy"}),$(".dialog-list-cart").load(domain+"/cart"),$("img.lazy").show().lazyload(),$(".icon-close-menu").click(function(){$(".menu-mobile").animate({width:"hide"},100)}),$(".btn-menu-mobile").click(function(){$(".menu-mobile").animate({width:"show"},100)}),$("#province").change(function(){var t=domain+"/district?province="+$(this).val();$("#kota").empty(),$.ajax({url:t,dataType:"json",success:function(t){$.each(t,function(t,a){$("#kota").append($("<option>",{value:a.item,text:a.city_name}))})}})}),$(".item-desc").click(function(){$(".item-desc").removeClass("active"),$(this).addClass("active")}),$(".btn-basket").unbind("click").click(function(){var t=$(".detail-title").text(),a=$(".price").attr("val"),e=$("#zoom_01").attr("src"),n=$("#input-number").val(),o=$(".max-item").text(),i=$(".discon").attr("val"),r=domain+"/add_to_cart?sku="+sku+"&name="+t+"&price="+a+"&image="+e+"&total="+n+"&max="+o+"&discount="+i;console.log(r),$.ajax({url:r,dataType:"json",success:function(t){$(".count-chart").text(t.count),$(".numberCircle span").text(t.count),$(".dialog-list-cart").load(domain+"/cart"),$("#modal-add-to-chart").modal("show")}})}),$(".loker-show").click(function(){var t=$(this).attr("val");$(".loker-show").removeClass("active"),$(this).addClass("active"),"alamat"==t?($(".show-locker").hide(),$(".show-address").show()):($(".show-locker").show(),$(".show-address").hide())}),$("button[name='btn-filter']").click(function(){$("input[name='title']").val().length>2&&$("#frm_filter").submit()}),$('input[name="title"]').on("keydown",function(t){if(13==t.which){if(!($(this).val().length>2))return!1;$("#frm_filter").submit()}}),$("#cbsort").change(function(){var t=domain+"/category/"+category+"?sort="+$(this).val();location.href=t}),$("#cbsortMerchant").change(function(){var t=$(this).attr("val"),a=domain+"/merchant/"+t+"?sort="+$(this).val();location.href=a}),$("#cbsortfilter").change(function(){var t=window.location.href,a=URLToArray(t);console.log(a);var e=domain+"/filter?title="+a.title+"&sort="+$(this).val();location.href=e}),$(".btn-beli").click(function(){var t=$(".detail-title").text(),a=$(".price").attr("val"),e=$("#zoom_01").attr("src"),n=$(".input-number").attr("value"),o=$(".max-item").text(),i=$(".discon").attr("val"),r=domain+"/add_to_cart?sku="+sku+"&name="+t+"&price="+a+"&image="+e+"&total="+n+"&max="+o+"&discount="+i;$.getJSON(r,{format:"json"}).done(function(t){location.href=domain+"/checkout"})}),$("#city li").on("click",function(){$(this).text();$(this).parents(".btn-group").find(".btn").html($(this).text()+' <span class="caret"></span>'),$("#loker li").parents(".btn-group").find(".btn").html('Pilih Loker <span class="caret"></span>'),$("input[name='lockercity']").val($(this).text());var t="";Array();$.each(arrLocker[$(this).text()],function(a,e){t+="<li>"+e.name+"</li>"}),$("#loker").html(t)}),$("#categoryfilter li").on("click",function(){$(this).parents(".f-category").find(".btn").html($(this).text()),$("input[name='categoryfilter']").val($(this).text())}),$(document).on("click","#loker li",function(){$(this).text();$(this).parents(".btn-group").find(".btn").html($(this).text()+' <span class="caret"></span>'),$("input[name='lockername']").val($(this).text());var t=new Array,a=new Array,e=lockers[$(this).text()];a.push(["'"+e.address+"'"]),t.push(["'"+e.name+"'",e.latitude,e.longitude]),$(".location-title-description").html("<strong>"+e.name+"</strong>"),$(".location-title-address").html(e.address+"<br>"+e.address_2+"<br>"+e.operational_hours),getLocker(t,a,!1)}),$(".next-to-pay").click(function(){var t=$(".loker-show.active").attr("val"),a=[];if("locker"==t){var e=$("input[name='lockercity']").val(),n=$("input[name='lockername']").val();""==e&&a.push("city tidak boleh kosong"),""==n&&a.push("loker tidak boleh kosong"),a.length>0?alert(a.join("\n")):$("#formsubmitcheckout").submit()}else{var o=$("input[name='nama']").val(),i=$("input[name='address']").val(),r=$("input[name='province'] option:selected").val(),l=$("input[name='kota'] option:selected").val(),s=$("input[name='kd_pos']").val(),c=$("input[name='phone']").val();""==o&&a.push("name tidak boleh kosong"),""==i&&a.push("address tidak boleh kosong"),""==r&&a.push("province tidak boleh kosong"),""==l&&a.push("kota tidak boleh kosong"),""==s&&a.push("kodepos tidak boleh kosong"),""==c&&a.push("phone tidak boleh kosong"),a.length>0?alert(a.join("\n")):$("#formsubmitaddresscheckout").submit()}}),$(".tabs").click(function(){console.log($(this).attr("val"));var t=$(this).attr("val");$(".tabs").removeClass("active"),$(".pmt").removeClass("active"),$(this).addClass("active"),$("."+t).addClass("active")}),$(".dropdown-content.masuk").on("focusout",function(){$(this).removeClass("active")}),$(document).on("click",".delete-cart",function(){var t=$(this).attr("val"),a=domain+"/remove_to_cart/"+t;$.getJSON(a,{format:"json"}).done(function(t){$(".numberCircle span").text(t.count),$(".data").load(domain+"/subcart"),"/payment"==window.location.pathname&&$(".side-cart").load(domain+"/sidecart"),console.log("success")})}),$(".btn-number").click(function(t){if(fieldName=$(this).attr("data-field"),type=$(this).attr("data-type"),input=$("input[name='"+fieldName+"']"),currentVal=parseInt(input.val()),isNaN(currentVal))input.val(0);else if("minus"==type){if(currentVal>input.attr("min")){var a=currentVal-1;input.val(a).change()}parseInt(input.val())==input.attr("min")&&$(this).attr("disabled",!0),$(".btn-number[data-type='plus'][data-field='"+fieldName+"']").removeAttr("disabled")}else"plus"==type&&(currentVal<input.attr("max")&&input.val(currentVal+1).change(),parseInt(input.val())==input.attr("max")&&$(this).attr("disabled",!0),$(".btn-number[data-type='minus'][data-field='"+fieldName+"']").removeAttr("disabled"))}),$(".input-number").focusin(function(){$(this).data("oldValue",$(this).val())}),$(".input-number").change(function(){minValue=parseInt($(this).attr("min")),maxValue=parseInt($(this).attr("max")),valueCurrent=parseInt($(this).val()),name=$(this).attr("name"),valueCurrent>=minValue?$(".btn-number[data-type='minus'][data-field='"+name+"']").removeAttr("disabled"):(alert("Sorry, the minimum value was reached"),$(this).val($(this).data("oldValue"))),valueCurrent<=maxValue?$(".btn-number[data-type='plus'][data-field='"+name+"']").removeAttr("disabled"):(alert("Sorry, the maximum value was reached"),$(this).val($(this).data("oldValue")))}),$(".input-number").keydown(function(t){-1!==$.inArray(t.keyCode,[46,8,9,27,13,190])||65==t.keyCode&&t.ctrlKey===!0||t.keyCode>=35&&t.keyCode<=39||(t.shiftKey||t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105)&&t.preventDefault()})}),$(document).on("click",".btn-number1",function(){if(fieldName=$(this).attr("data-field"),type=$(this).attr("data-type"),sku=$(this).attr("sku"),input=$("input[name='"+fieldName+"']"),currentVal=parseInt(input.val()),isNaN(currentVal))input.val(0);else if("minus"==type){if(currentVal>input.attr("min")){var t=currentVal-1,a=domain+"/update_to_cart?sku="+sku+"&total="+t;$(this).attr("disabled",!0),$.ajax({url:a,dataType:"json",success:function(t){$(".data").load(domain+"/subcart"),"/payment"==window.location.pathname&&$(".side-cart").load(domain+"/sidecart")}}),input.val(t).change()}parseInt(input.val())==input.attr("min")&&($(this).attr("disabled",!0),$(".btn-number[data-type='plus'][data-field='"+name+"']").removeAttr("disabled"))}else if("plus"==type){if(currentVal<input.attr("max")){var t=currentVal+1,a=domain+"/update_to_cart?sku="+sku+"&total="+t;$(this).attr("disabled",!0),$.ajax({url:a,dataType:"json",success:function(t){$(".data").load(domain+"/subcart"),"/payment"==window.location.pathname&&$(".side-cart").load(domain+"/sidecart")}}),input.val(t).change()}parseInt(input.val())==input.attr("max")&&($(this).attr("disabled",!0),$(".btn-number[data-type='minus'][data-field='"+name+"']").removeAttr("disabled"))}}),$(document).on("focusin",".input-number1",function(){$(this).data("oldValue",$(this).val())}),$(document).on("change",".input-number1",function(){minValue=parseInt($(this).attr("min")),maxValue=parseInt($(this).attr("max")),valueCurrent=parseInt($(this).val()),name=$(this).attr("name");var t=$(this).attr("sku");if(valueCurrent>=minValue?$(".btn-number[data-type='minus'][data-field='"+name+"']").removeAttr("disabled"):$(this).val($(this).data("oldValue")),valueCurrent<=maxValue?$(".btn-number[data-type='plus'][data-field='"+name+"']").removeAttr("disabled"):(alert("Sorry, the maximum value was reached"),$(this).val($(this).data("oldValue"))),valueCurrent>=minValue&&valueCurrent<=maxValue){var a=domain+"/update_to_cart?sku="+t+"&total="+valueCurrent;$.getJSON(a,{format:"json"}).done(function(t){console.log(t),$(".data").load(domain+"/subcart"),"/payment"==window.location.pathname&&$(".side-cart").load(domain+"/sidecart")})}}),$(document).on("keydown",".input-number1",function(t){-1!==$.inArray(t.keyCode,[46,8,9,27,13,190])||65==t.keyCode&&t.ctrlKey===!0||t.keyCode>=35&&t.keyCode<=39||(t.shiftKey||t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105)&&t.preventDefault()});